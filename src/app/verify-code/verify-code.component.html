<div class="verify-container">
  <div class="verify-card">
    <h2>Verificar C√≥digo</h2>
    
    <div class="email-info">
      <p>C√≥digo enviado para: <strong>{{ email }}</strong></p>
    </div>

    <div class="code-display" *ngIf="showCode">
      <div class="development-notice">
        <p><strong>Modo Desenvolvimento:</strong></p>
        <p>{{ successMessage }}</p>
      </div>
    </div>

    <div class="attempts-info" *ngIf="attemptsRemaining < 5">
      <p class="warning">Tentativas restantes: <strong>{{ attemptsRemaining }}</strong></p>
    </div>

    <form (ngSubmit)="onSubmit()" #verifyForm="ngForm">
      <div class="form-group">
        <label for="verificationCode">C√≥digo de Verifica√ß√£o (6 d√≠gitos)</label>
        <input
          type="text"
          id="verificationCode"
          [(ngModel)]="verificationCode"
          name="verificationCode"
          required
          placeholder="000000"
          maxlength="6"
          pattern="[0-9]{6}"
          (input)="onCodeInput($event)"
          [disabled]="isLoading"
          class="code-input"
          autocomplete="one-time-code">
      </div>

      <button
        type="submit"
        class="btn-primary"
        [disabled]="isLoading || !verifyForm.form.valid">
        <span *ngIf="isLoading">Verificando...</span>
        <span *ngIf="!isLoading">Verificar C√≥digo</span>
      </button>
    </form>

    <div class="resend-section">
      <p>N√£o recebeu o c√≥digo?</p>
      <button
        type="button"
        class="btn-secondary"
        (click)="resendCode()"
        [disabled]="isLoading || isResending || !canResend">
        <span *ngIf="!isResending && canResend">üìß Reenviar C√≥digo</span>
        <span *ngIf="isResending">‚è≥ Reenviando...</span>
        <span *ngIf="!canResend && resendCooldown > 0">Aguarde {{ resendCooldown }}s</span>
      </button>
    </div>

    <div class="message" *ngIf="errorMessage" [ngClass]="{'error': errorMessage, 'success': successMessage && !errorMessage}">
      <p>{{ errorMessage || successMessage }}</p>
    </div>

    <div class="navigation-links">
      <button type="button" class="btn-link" (click)="goBackToRegister()">
        ‚Üê Voltar ao Cadastro
      </button>
      <a routerLink="/login" class="login-link">J√° tem conta? Fazer Login</a>
    </div>
  </div>
</div>