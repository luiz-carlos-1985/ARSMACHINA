 <nav class="navbar">
  <div class="nav-container">
    <div class="nav-container-animate">
      <a routerLink="/home">
        <img src="assets/ars-machina-logo.svg" alt="Ars Machina Logo" class="nav-logo">
        <span class="brand-text">Ars Machina Consultancy</span>
      </a>
    </div>
    
    <!-- Desktop Menu -->
    <div class="nav-menu desktop-menu" [class.logged-in]="isLoggedIn">
      <a routerLink="/home" routerLinkActive="active" [title]="getTranslation('nav.home')">
        <span class="nav-text">{{ getTranslation('nav.home') }}</span>
      </a>
      <a routerLink="/about" routerLinkActive="active" [title]="getTranslation('nav.about')">
        <span class="nav-text">{{ getTranslation('nav.about') }}</span>
      </a>
      <a routerLink="/services" routerLinkActive="active" [title]="getTranslation('nav.services')">
        <span class="nav-text">{{ getTranslation('nav.services') }}</span>
      </a>
      <a routerLink="/blog" routerLinkActive="active" [title]="getTranslation('nav.blog')">
        <span class="nav-text">{{ getTranslation('nav.blog') }}</span>
      </a>
      <a routerLink="/contact" routerLinkActive="active" [title]="getTranslation('nav.contact')">
        <span class="nav-text">{{ getTranslation('nav.contact') }}</span>
      </a>
      <a *ngIf="!isLoggedIn" routerLink="/login" routerLinkActive="active" [title]="getTranslation('nav.login')">
        <span class="nav-text">{{ getTranslation('nav.login') }}</span>
      </a>
      <a *ngIf="isLoggedIn" routerLink="/dashboard" routerLinkActive="active" [title]="getTranslation('nav.dashboard')">
        <span class="nav-text">{{ getTranslation('nav.dashboard') }}</span>
      </a>
      
      
      <!-- User Menu Dropdown -->
      <div *ngIf="isLoggedIn" class="user-menu-dropdown">
        <button class="user-menu-btn" (click)="toggleUserMenu($event)" [class.active]="isUserMenuOpen" type="button" aria-label="User menu" [attr.aria-expanded]="isUserMenuOpen" tabindex="0">
          <span class="user-avatar">ğŸ‘¤</span>
          <svg class="dropdown-arrow" [class.rotated]="isUserMenuOpen" width="12" height="12" viewBox="0 0 12 12">
            <path d="M3 4.5L6 7.5L9 4.5" stroke="currentColor" stroke-width="1.5" fill="none"/>
          </svg>
        </button>
        <div class="user-dropdown" [class.show]="isUserMenuOpen">
          <button class="user-option" (click)="navigateToSection('profile', $event)" type="button" tabindex="0">
            <span class="option-icon">ğŸ‘¤</span>
            <span>{{ getTranslation('dashboard.profile') }}</span>
          </button>
          <button class="user-option" (click)="navigateToSection('settings', $event)" type="button" tabindex="0">
            <span class="option-icon">âš™ï¸</span>
            <span>{{ getTranslation('dashboard.settings') }}</span>
          </button>
          <button class="user-option" (click)="navigateToSection('reports', $event)" type="button" tabindex="0">
            <span class="option-icon">ğŸ“Š</span>
            <span>{{ getTranslation('dashboard.reports') }}</span>
          </button>
          <button class="user-option" (click)="navigateToSection('help', $event)" type="button" tabindex="0">
            <span class="option-icon">â“</span>
            <span>{{ getTranslation('nav.help') }}</span>
          </button>
          <div class="dropdown-divider"></div>
          <button class="user-option delete-account" (click)="navigateToSection('delete-account', $event)" type="button" tabindex="0">
            <span class="option-icon">ğŸ—‘ï¸</span>
            <span>{{ getTranslation('deleteAccount.title') }}</span>
          </button>
          <button class="user-option logout" (click)="logout()" type="button" tabindex="0">
            <span class="option-icon">ğŸšª</span>
            <span>{{ getTranslation('nav.logout') }}</span>
          </button>
        </div>
      </div>
      
      <button *ngIf="!isLoggedIn" (click)="navigateToSection('help', $event)" class="help-btn" type="button" aria-label="Help" tabindex="0">
        <span class="help-icon">â“</span>
        <span class="nav-text">{{ getTranslation('nav.help') }}</span>
      </button>
      
      <app-theme-toggle></app-theme-toggle>
      
      <div class="language-selector desktop-lang">
        <button class="language-btn" (click)="toggleLanguageDropdown($event)" [class.active]="isLanguageDropdownOpen" type="button" aria-label="Language selector" [attr.aria-expanded]="isLanguageDropdownOpen" tabindex="0">
          <span class="current-lang">{{ getCurrentLanguageName() }}</span>
          <svg class="dropdown-arrow" [class.rotated]="isLanguageDropdownOpen" width="12" height="12" viewBox="0 0 12 12">
            <path d="M3 4.5L6 7.5L9 4.5" stroke="currentColor" stroke-width="1.5" fill="none"/>
          </svg>
        </button>
        <div class="language-dropdown" [class.show]="isLanguageDropdownOpen">
          <button *ngFor="let lang of availableLanguages" class="language-option" [class.active]="lang.code === currentLanguage" (click)="selectLanguage(lang.code, $event)" type="button" tabindex="0">
            {{ lang.name }}
          </button>
        </div>
      </div>
    </div>

    <!-- Mobile Menu -->
    <div class="mobile-nav-menu" 
         [class.active]="isMenuOpen"
         [ngStyle]="getMenuStyle()"
         (touchstart)="onMenuTouchStart($event)"
         (mousedown)="onMenuMouseDown($event)">
      <!-- Mobile Menu Header -->
      <div class="mobile-menu-header">
        <div class="mobile-brand">
          <img src="assets/ars-machina-logo.svg" alt="Ars Machina Logo" class="mobile-logo">
          <div class="mobile-brand-info">
            <h3>Ars Machina</h3>
            <p>Consultancy</p>
          </div>
        </div>
        <button class="mobile-close-btn" (click)="closeMenu()" title="Fechar menu" type="button" aria-label="Close menu" tabindex="0">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
            <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </button>
      </div>

      <!-- Mobile Menu Items -->
      <div class="mobile-menu-content">
        <div class="mobile-menu-section">
          <h4 class="mobile-section-title">{{ getTranslation('nav.navigation') }}</h4>
          <a routerLink="/home" (click)="closeMenu()" routerLinkActive="active" class="mobile-nav-item">
            <div class="mobile-nav-icon">ğŸ </div>
            <div class="mobile-nav-content">
              <span class="mobile-nav-title">{{ getTranslation('nav.home') }}</span>
              <span class="mobile-nav-desc">{{ getTranslation('nav.homeDesc') }}</span>
            </div>
            <div class="mobile-nav-arrow">â†’</div>
          </a>
          <a routerLink="/about" (click)="closeMenu()" routerLinkActive="active" class="mobile-nav-item">
            <div class="mobile-nav-icon">â„¹ï¸</div>
            <div class="mobile-nav-content">
              <span class="mobile-nav-title">{{ getTranslation('nav.about') }}</span>
              <span class="mobile-nav-desc">{{ getTranslation('nav.aboutDesc') }}</span>
            </div>
            <div class="mobile-nav-arrow">â†’</div>
          </a>
          <a routerLink="/services" (click)="closeMenu()" routerLinkActive="active" class="mobile-nav-item">
            <div class="mobile-nav-icon">ğŸ› ï¸</div>
            <div class="mobile-nav-content">
              <span class="mobile-nav-title">{{ getTranslation('nav.services') }}</span>
              <span class="mobile-nav-desc">{{ getTranslation('nav.servicesDesc') }}</span>
            </div>
            <div class="mobile-nav-arrow">â†’</div>
          </a>
          <a routerLink="/blog" (click)="closeMenu()" routerLinkActive="active" class="mobile-nav-item">
            <div class="mobile-nav-icon">ğŸ“</div>
            <div class="mobile-nav-content">
              <span class="mobile-nav-title">{{ getTranslation('nav.blog') }}</span>
              <span class="mobile-nav-desc">{{ getTranslation('nav.blogDesc') }}</span>
            </div>
            <div class="mobile-nav-arrow">â†’</div>
          </a>
          <a routerLink="/contact" (click)="closeMenu()" routerLinkActive="active" class="mobile-nav-item">
            <div class="mobile-nav-icon">ğŸ“</div>
            <div class="mobile-nav-content">
              <span class="mobile-nav-title">{{ getTranslation('nav.contact') }}</span>
              <span class="mobile-nav-desc">{{ getTranslation('nav.contactDesc') }}</span>
            </div>
            <div class="mobile-nav-arrow">â†’</div>
          </a>
        </div>

        <div class="mobile-menu-section" *ngIf="isLoggedIn">
          <h4 class="mobile-section-title">Dashboard</h4>
          <a routerLink="/dashboard" (click)="closeMenu()" routerLinkActive="active" class="mobile-nav-item">
            <div class="mobile-nav-icon">ğŸ“Š</div>
            <div class="mobile-nav-content">
              <span class="mobile-nav-title">{{ getTranslation('nav.dashboard') }}</span>
              <span class="mobile-nav-desc">{{ getTranslation('nav.dashboardDesc') }}</span>
            </div>
            <div class="mobile-nav-arrow">â†’</div>
          </a>
        </div>

        <div class="mobile-menu-section" *ngIf="!isLoggedIn || isLoggedIn">
          <h4 class="mobile-section-title">{{ getTranslation('nav.account') }}</h4>
          <a *ngIf="!isLoggedIn" routerLink="/login" (click)="closeMenu()" routerLinkActive="active" class="mobile-nav-item">
            <div class="mobile-nav-icon">ğŸ”</div>
            <div class="mobile-nav-content">
              <span class="mobile-nav-title">{{ getTranslation('nav.login') }}</span>
              <span class="mobile-nav-desc">{{ getTranslation('nav.loginDesc') }}</span>
            </div>
            <div class="mobile-nav-arrow">â†’</div>
          </a>
          
          <div *ngIf="isLoggedIn" class="mobile-user-section">
            <a routerLink="/profile" (click)="closeMenu()" class="mobile-nav-item">
              <div class="mobile-nav-icon">ğŸ‘¤</div>
              <div class="mobile-nav-content">
                <span class="mobile-nav-title">{{ getTranslation('dashboard.profile') }}</span>
                <span class="mobile-nav-desc">{{ getTranslation('nav.profileDesc') }}</span>
              </div>
              <div class="mobile-nav-arrow">â†’</div>
            </a>
            
            <a routerLink="/settings" (click)="closeMenu()" class="mobile-nav-item">
              <div class="mobile-nav-icon">âš™ï¸</div>
              <div class="mobile-nav-content">
                <span class="mobile-nav-title">{{ getTranslation('dashboard.settings') }}</span>
                <span class="mobile-nav-desc">{{ getTranslation('nav.settingsDesc') }}</span>
              </div>
              <div class="mobile-nav-arrow">â†’</div>
            </a>
            
            <a routerLink="/reports" (click)="closeMenu()" class="mobile-nav-item">
              <div class="mobile-nav-icon">ğŸ“Š</div>
              <div class="mobile-nav-content">
                <span class="mobile-nav-title">{{ getTranslation('dashboard.reports') }}</span>
                <span class="mobile-nav-desc">{{ getTranslation('nav.reportsDesc') }}</span>
              </div>
              <div class="mobile-nav-arrow">â†’</div>
            </a>
            
            <a routerLink="/delete-account" (click)="closeMenu()" class="mobile-nav-item delete-account-mobile">
              <div class="mobile-nav-icon">ğŸ—‘ï¸</div>
              <div class="mobile-nav-content">
                <span class="mobile-nav-title">{{ getTranslation('deleteAccount.title') }}</span>
                <span class="mobile-nav-desc">{{ getTranslation('nav.deleteAccountDesc') }}</span>
              </div>
              <div class="mobile-nav-arrow">â†’</div>
            </a>
          </div>
          
          <a routerLink="/help" (click)="closeMenu()" class="mobile-nav-item mobile-help-item">
            <div class="mobile-nav-icon">â“</div>
            <div class="mobile-nav-content">
              <span class="mobile-nav-title">{{ getTranslation('nav.help') }}</span>
              <span class="mobile-nav-desc">{{ getTranslation('nav.helpDesc') }}</span>
            </div>
            <div class="mobile-nav-arrow">â†’</div>
          </a>
        </div>

        <div class="mobile-menu-section">
          <h4 class="mobile-section-title">{{ getTranslation('nav.settings') }}</h4>
          
          <div class="mobile-theme-selector">
            <div class="mobile-nav-icon">{{ getCurrentThemeIcon() }}</div>
            <div class="mobile-nav-content">
              <span class="mobile-nav-title">{{ getTranslation('nav.theme') }}</span>
              <span class="mobile-nav-desc">{{ getCurrentThemeName() }}</span>
            </div>
            <button class="mobile-theme-dropdown-btn" (click)="toggleThemeDropdown($event)" [class.active]="isThemeDropdownOpen" type="button" aria-label="Theme selector" [attr.aria-expanded]="isThemeDropdownOpen" tabindex="0">
              <svg class="dropdown-arrow" [class.rotated]="isThemeDropdownOpen" width="12" height="12" viewBox="0 0 12 12">
                <path d="M3 4.5L6 7.5L9 4.5" stroke="currentColor" stroke-width="1.5" fill="none"/>
              </svg>
            </button>
            <div class="mobile-theme-dropdown" [class.show]="isThemeDropdownOpen">
              <button *ngFor="let theme of availableThemes" class="mobile-theme-option" [class.active]="theme.code === currentTheme" (click)="selectTheme(theme.code, $event)" type="button" tabindex="0">
                <span class="theme-icon">{{ theme.icon }}</span>
                <span class="theme-name">{{ theme.name }}</span>
              </button>
            </div>
          </div>
          
          <div class="mobile-language-selector">
            <div class="mobile-nav-icon">ğŸŒ</div>
            <div class="mobile-nav-content">
              <span class="mobile-nav-title">{{ getTranslation('nav.language') }}</span>
              <span class="mobile-nav-desc">{{ getCurrentLanguageName() }}</span>
            </div>
            <button class="mobile-language-dropdown-btn" (click)="toggleLanguageDropdown($event)" [class.active]="isLanguageDropdownOpen" type="button" aria-label="Language selector" [attr.aria-expanded]="isLanguageDropdownOpen" tabindex="0">
              <svg class="dropdown-arrow" [class.rotated]="isLanguageDropdownOpen" width="12" height="12" viewBox="0 0 12 12">
                <path d="M3 4.5L6 7.5L9 4.5" stroke="currentColor" stroke-width="1.5" fill="none"/>
              </svg>
            </button>
            <div class="mobile-language-dropdown" [class.show]="isLanguageDropdownOpen">
              <button *ngFor="let lang of availableLanguages" class="mobile-language-option" [class.active]="lang.code === currentLanguage" (click)="selectLanguage(lang.code, $event)" type="button" tabindex="0">
                {{ lang.name }}
              </button>
            </div>
          </div>
        </div>

        <div class="mobile-menu-footer" *ngIf="isLoggedIn">
          <button (click)="logout()" class="mobile-logout-btn" type="button" aria-label="Logout" tabindex="0">
            ğŸšª {{ getTranslation('nav.logout') }}
          </button>
        </div>
      </div>
    </div>

    <!-- Hamburger Menu -->
    <button class="hamburger" [class.active]="isMenuOpen" *ngIf="!isMenuOpen" (click)="toggleMenu()" type="button" aria-label="Toggle navigation menu" [attr.aria-expanded]="isMenuOpen" tabindex="0">
      <span></span>
      <span></span>
      <span></span>
    </button>
  </div>

  <!-- Mobile Menu Overlay -->
  <div class="mobile-menu-overlay" [class.active]="isMenuOpen" (click)="closeMenu()" [attr.aria-hidden]="!isMenuOpen"></div>
</nav>