<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=AW-17534393821"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'AW-17534393821');
</script>
<div class="reset-password-container">
  <div class="reset-password-card">
    <h2>{{ getTranslation('resetPassword.title') }}</h2>

    <!-- Step 1: Send Reset Email -->
    <div class="step" *ngIf="!confirmationCode">
      <p>{{ getTranslation('resetPassword.instructions') }}</p>

      <form (ngSubmit)="sendResetEmail()" #resetForm="ngForm">
        <div class="form-group">
          <label for="email">{{ getTranslation('resetPassword.emailLabel') }}</label>
          <input
            type="email"
            id="email"
            [(ngModel)]="email"
            name="email"
            required
            placeholder="seu@email.com"
            [disabled]="isLoading">
        </div>

        <button
          type="submit"
          class="btn-primary"
          [disabled]="isLoading || !resetForm.form.valid">
          <span *ngIf="isLoading">{{ getTranslation('resetPassword.sending') }}</span>
          <span *ngIf="!isLoading">{{ getTranslation('resetPassword.sendEmail') }}</span>
        </button>
      </form>
    </div>

    <!-- Step 2: Confirm Reset -->
    <div class="step" *ngIf="confirmationCode">
      <p>{{ getTranslation('resetPassword.confirmInstructions') }}</p>

      <form (ngSubmit)="confirmReset()" #confirmForm="ngForm">
        <div class="form-group">
          <label for="confirmationCode">{{ getTranslation('resetPassword.codeLabel') }}</label>
          <input
            type="text"
            id="confirmationCode"
            [(ngModel)]="confirmationCode"
            name="confirmationCode"
            required
            placeholder="123456"
            [disabled]="isLoading">
        </div>

        <div class="form-group">
          <label for="newPassword">{{ getTranslation('resetPassword.newPasswordLabel') }}</label>
          <input
            type="password"
            id="newPassword"
            [(ngModel)]="newPassword"
            name="newPassword"
            required
            placeholder="Nova senha"
            [disabled]="isLoading">
        </div>

        <div class="form-group">
          <label for="confirmNewPassword">{{ getTranslation('resetPassword.confirmPasswordLabel') }}</label>
          <input
            type="password"
            id="confirmNewPassword"
            [(ngModel)]="confirmNewPassword"
            name="confirmNewPassword"
            required
            placeholder="Confirme a nova senha"
            [disabled]="isLoading">
        </div>

        <button
          type="submit"
          class="btn-primary"
          [disabled]="isLoading || !confirmForm.form.valid">
          <span *ngIf="isLoading">{{ getTranslation('resetPassword.resetting') }}</span>
          <span *ngIf="!isLoading">{{ getTranslation('resetPassword.resetPassword') }}</span>
        </button>
      </form>
    </div>

    <!-- Messages -->
    <div class="message" *ngIf="errorMessage" [ngClass]="{'error': errorMessage, 'success': successMessage}">
      <p>{{ errorMessage || successMessage }}</p>
    </div>

    <!-- Back to Login -->
    <div class="back-to-login">
      <a routerLink="/login">{{ getTranslation('resetPassword.backToLogin') }}</a>
    </div>
  </div>
</div>
