<div class="dashboard-wrapper">
  <!-- Hero Section -->
  <app-dashboard-hero 
    [userName]="userName" 
    [userStats]="userStats"
    (createProject)="createNewProject()"
    (generateReport)="generateReport()">
  </app-dashboard-hero>

  <!-- Quick Actions Bar -->
  <app-quick-actions
    (createProject)="createNewProject()"
    (addTask)="addNewTask()"
    (scheduleMeeting)="scheduleMeeting()"
    (generateReport)="generateReport()">
  </app-quick-actions>

  <!-- Main Dashboard Content -->
  <div class="dashboard-content">
    <div class="content-grid">
      <!-- Client Management -->
      <div class="client-management">
        <div class="section-header">
          <h2>🏢 Gestão de Clientes</h2>
          <button class="manage-clients-btn" (click)="manageClients()">
            Gerenciar Clientes
          </button>
        </div>
        <div class="clients-grid">
          <div class="client-card" *ngFor="let client of activeClients">
            <div class="client-header">
              <div class="client-avatar">{{ client.name.charAt(0) }}</div>
              <div class="client-info">
                <h4>{{ client.name }}</h4>
                <div class="client-status" [ngClass]="client.status">{{ client.statusText }}</div>
              </div>
              <div class="client-value">R$ {{ client.contractValue | number:'1.0-0' }}</div>
            </div>
            <div class="client-details">
              <div class="detail-item">
                <span>📧</span>
                <span>{{ client.email }}</span>
              </div>
              <div class="detail-item">
                <span>📞</span>
                <span>{{ client.phone }}</span>
              </div>
              <div class="detail-item">
                <span>📅</span>
                <span>Contrato até: {{ client.contractEnd }}</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Financial Overview -->
      <div class="financial-overview">
        <div class="section-header">
          <h2>💰 Visão Financeira</h2>
          <div class="section-actions">
            <button class="icon-btn" (click)="refreshFinancials()" title="Atualizar">🔄</button>
            <button class="icon-btn" (click)="exportFinancials()" title="Exportar">📤</button>
          </div>
        </div>
        <div class="financial-grid">
          <div class="financial-card revenue">
            <div class="financial-icon">💵</div>
            <div class="financial-info">
              <h3>Receita Mensal</h3>
              <div class="financial-value">R$ {{ monthlyRevenue | number:'1.0-0' }}</div>
              <div class="financial-change positive">+18% vs mês anterior</div>
            </div>
          </div>
          <div class="financial-card expenses">
            <div class="financial-icon">📊</div>
            <div class="financial-info">
              <h3>Despesas</h3>
              <div class="financial-value">R$ {{ monthlyExpenses | number:'1.0-0' }}</div>
              <div class="financial-change negative">+5% vs mês anterior</div>
            </div>
          </div>
          <div class="financial-card profit">
            <div class="financial-icon">📈</div>
            <div class="financial-info">
              <h3>Lucro Líquido</h3>
              <div class="financial-value">R$ {{ netProfit | number:'1.0-0' }}</div>
              <div class="financial-change positive">+25% vs mês anterior</div>
            </div>
          </div>
          <div class="financial-card pending">
            <div class="financial-icon">⏳</div>
            <div class="financial-info">
              <h3>A Receber</h3>
              <div class="financial-value">R$ {{ pendingReceivables | number:'1.0-0' }}</div>
              <div class="financial-change neutral">{{ pendingInvoices }} faturas</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Team Performance -->
      <div class="team-performance">
        <div class="section-header">
          <h2>👥 Performance da Equipe</h2>
          <button class="manage-team-btn enhanced" (click)="manageTeam()">
            <span class="btn-icon">👥</span>
            <span class="btn-text">Ver Equipe</span>
            <span class="btn-arrow">→</span>
          </button>
        </div>
        <div class="team-overview">
          <div class="team-summary">
            <div class="summary-stat">
              <div class="summary-number">{{ teamMembers.length }}</div>
              <div class="summary-label">Membros</div>
            </div>
            <div class="summary-stat">
              <div class="summary-number">{{ getAverageEfficiency() }}%</div>
              <div class="summary-label">Eficiência Média</div>
            </div>
            <div class="summary-stat">
              <div class="summary-number">{{ getTotalActiveProjects() }}</div>
              <div class="summary-label">Projetos Ativos</div>
            </div>
          </div>
        </div>
        <div class="team-grid-enhanced">
          <div class="team-member-enhanced" *ngFor="let member of teamMembers">
            <div class="member-card-header">
              <div class="member-avatar-enhanced">{{ member.name.charAt(0) }}</div>
              <div class="member-basic-info">
                <h4>{{ member.name }}</h4>
                <div class="member-role">{{ member.role }}</div>
              </div>
              <div class="member-status-enhanced" [ngClass]="member.status">
                <span class="status-dot"></span>
                {{ member.statusText }}
              </div>
            </div>
            <div class="member-metrics-enhanced">
              <div class="metric-item">
                <div class="metric-icon">📁</div>
                <div class="metric-info">
                  <div class="metric-value">{{ member.activeProjects }}</div>
                  <div class="metric-label">Projetos</div>
                </div>
              </div>
              <div class="metric-item">
                <div class="metric-icon">⚡</div>
                <div class="metric-info">
                  <div class="metric-value">{{ member.efficiency }}%</div>
                  <div class="metric-label">Eficiência</div>
                </div>
              </div>
            </div>
            <div class="efficiency-progress">
              <div class="progress-label">
                <span>Performance</span>
                <span>{{ member.efficiency }}%</span>
              </div>
              <div class="progress-bar-enhanced">
                <div class="progress-fill-enhanced" [style.width.%]="member.efficiency"></div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Analytics Overview -->
      <app-analytics-overview
        [analytics]="analytics"
        (refresh)="refreshAnalytics()"
        (export)="exportAnalytics()">
      </app-analytics-overview>

      <!-- Projects Overview -->
      <div class="projects-overview">
        <div class="section-header">
          <h2>{{ getTranslation('dashboard.projectProgress') }}</h2>
          <button class="manage-projects-btn enhanced" (click)="manageProjects()">
            <span class="btn-icon">📊</span>
            <span class="btn-text">Ver Todas</span>
            <span class="btn-arrow">→</span>
          </button>
        </div>
        <div class="projects-grid">
          <div class="project-card" *ngFor="let project of activeProjects">
            <div class="project-header">
              <div class="project-info">
                <h4>{{ project.name }}</h4>
                <div class="project-status" [ngClass]="project.status">{{ project.statusText }}</div>
              </div>
              <div class="project-menu">
                <button class="menu-btn" (click)="openProjectMenu(project)" title="Menu do projeto" aria-label="Abrir menu do projeto">⋮</button>
              </div>
            </div>
            <div class="project-progress">
              <div class="progress-info">
                <span class="progress-label">Progresso</span>
                <span class="progress-value">{{ project.progress }}%</span>
              </div>
              <div class="progress-bar">
                <div class="progress-fill" [style.width.%]="project.progress"></div>
              </div>
            </div>
            <div class="project-meta">
              <div class="meta-item">
                <span>📅</span>
                <span>{{ getTranslation('dashboard.due') }}: {{ project.deadline }}</span>
              </div>
              <div class="meta-item">
                <span>👥</span>
                <span>{{ project.teamSize }} {{ getTranslation('dashboard.members') }}</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Activity & Notifications -->
    <div class="activity-notifications">
      <!-- Recent Activities -->
      <div class="activities-panel">
        <div class="panel-header">
          <h3>{{ getTranslation('dashboard.recentActivity') }}</h3>
          <button class="view-all-btn enhanced" (click)="viewAllActivities()">
            <span class="btn-icon">📋</span>
            <span class="btn-text">Ver Todas</span>
            <span class="btn-arrow">→</span>
          </button>
        </div>
        <div class="activities-list">
          <div class="activity-item" *ngFor="let activity of recentActivities.slice(0, 5)">
            <div class="activity-icon">{{ getActivityIcon(activity.type) }}</div>
            <div class="activity-content">
              <div class="activity-text">{{ activity.text }}</div>
              <div class="activity-time">{{ activity.time }}</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Notifications -->
      <div class="notifications-panel">
        <div class="panel-header">
          <h3>{{ getTranslation('dashboard.notifications') }}</h3>
          <div class="notification-count" *ngIf="unreadNotificationsCount > 0">
            {{ unreadNotificationsCount }}
          </div>
        </div>
        <div class="notifications-list">
          <div class="notification-item" 
               *ngFor="let notification of notifications.slice(0, 4)"
               [ngClass]="{ 'unread': !notification.read }">
            <div class="notification-icon">{{ getNotificationIcon(notification.type) }}</div>
            <div class="notification-content">
              <div class="notification-text">{{ notification.text }}</div>
              <div class="notification-time">{{ notification.time }}</div>
            </div>
            <button class="notification-close" 
                    (click)="dismissNotification(notification)"
                    [title]="getTranslation('dashboard.dismissNotification')"
                    aria-label="Dispensar notificação">×</button>
          </div>
        </div>
        <button class="view-all-notifications enhanced" (click)="viewAllNotifications()">
          <span class="btn-icon">🔔</span>
          <span class="btn-text">Ver Todas</span>
          <span class="btn-arrow">→</span>
        </button>
      </div>
    </div>
  </div>

  <!-- Quick Links & Support -->
  <div class="quick-links-support">
    <!-- Quick Links -->
    <div class="quick-links-panel">
      <h3>{{ getTranslation('dashboard.quickLinks') }}</h3>
      <div class="links-grid">
        <button class="quick-link" (click)="navigateTo('profile')">
          <div class="link-icon">👤</div>
          <span>{{ getTranslation('dashboard.profile') }}</span>
        </button>
        <button class="quick-link" (click)="navigateToSettings()">
          <div class="link-icon">⚙️</div>
          <span>{{ getTranslation('dashboard.settings') }}</span>
        </button>
        <button class="quick-link" (click)="navigateTo('reports')">
          <div class="link-icon">📊</div>
          <span>{{ getTranslation('dashboard.reports') }}</span>
        </button>
        <button class="quick-link" (click)="navigateTo('help')">
          <div class="link-icon">❓</div>
          <span>{{ getTranslation('dashboard.help') }}</span>
        </button>
      </div>
    </div>

    <!-- Support -->
    <div class="support-panel">
      <h3>Suporte</h3>
      <div class="support-options">
        <button class="support-btn chat" (click)="openChatSupport()">
          <div class="support-icon">💬</div>
          <div class="support-info">
            <div class="support-title">Chat ao Vivo</div>
            <div class="support-subtitle">Resposta imediata</div>
          </div>
        </button>
        <button class="support-btn email" (click)="sendSupportEmail()">
          <div class="support-icon">📧</div>
          <div class="support-info">
            <div class="support-title">Email</div>
            <div class="support-subtitle">Resposta em 24h</div>
          </div>
        </button>
        <button class="support-btn phone" (click)="callSupport()">
          <div class="support-icon">📞</div>
          <div class="support-info">
            <div class="support-title">Telefone e WhatsApp</div>
            <div class="support-subtitle">+55 98 999649-9215</div>
          </div>
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Component Views -->
<div class="component-overlay" *ngIf="showProfileComponent || showSettingsComponent || showReportsComponent || showHelpComponent">
  <div class="component-container">
    <div class="component-header">
      <button class="component-close" (click)="closeAllComponents()" title="Voltar ao Dashboard" aria-label="Voltar ao Dashboard">
        ← {{ getTranslation('dashboard.backToDashboard') }}
      </button>
    </div>
    
    <app-profile *ngIf="showProfileComponent"></app-profile>
    <app-settings *ngIf="showSettingsComponent"></app-settings>
    <app-enhanced-reports *ngIf="showReportsComponent"></app-enhanced-reports>
    <app-help *ngIf="showHelpComponent"></app-help>
  </div>
</div>

<!-- Enhanced Report Modal -->
<div class="modal-overlay" *ngIf="showReportModal" (click)="closeReportModal()">
  <div class="report-modal" (click)="$event.stopPropagation()">
    <div class="report-header secondary-style">
      <h2>📊 {{ getTranslation('dashboard.generateReport') }}</h2>
      <p>{{ getTranslation('dashboard.chooseReportType') }}</p>
      <button class="modal-close" (click)="closeReportModal()" title="Fechar modal" aria-label="Fechar modal de relatórios">×</button>
    </div>
    
    <div class="report-stats">
      <div class="stat-item">
        <div class="stat-number">{{ activeProjects.length }}</div>
        <div class="stat-label">{{ getTranslation('dashboard.projects') }}</div>
      </div>
      <div class="stat-item">
        <div class="stat-number">{{ tasks.length }}</div>
        <div class="stat-label">{{ getTranslation('dashboard.tasks') }}</div>
      </div>
      <div class="stat-item">
        <div class="stat-number">{{ productivityScore }}%</div>
        <div class="stat-label">{{ getTranslation('dashboard.productivity') }}</div>
      </div>
    </div>
    
    <div class="report-options">
      <div class="report-card" (click)="generateSelectedReport('projects')">
        <div class="report-icon">📁</div>
        <div class="report-info">
          <h3>{{ getTranslation('dashboard.projectReport') }}</h3>
          <p>{{ getTranslation('dashboard.projectReportDesc') }}</p>
          <div class="report-meta">
            <span class="format">CSV</span>
            <span class="count">{{ activeProjects.length }} projetos</span>
          </div>
        </div>
        <div class="report-arrow">→</div>
      </div>
      
      <div class="report-card" (click)="generateSelectedReport('tasks')">
        <div class="report-icon">✅</div>
        <div class="report-info">
          <h3>{{ getTranslation('dashboard.taskReport') }}</h3>
          <p>{{ getTranslation('dashboard.taskReportDesc') }}</p>
          <div class="report-meta">
            <span class="format">CSV</span>
            <span class="count">{{ tasks.length }} tarefas</span>
          </div>
        </div>
        <div class="report-arrow">→</div>
      </div>
      
      <div class="report-card" (click)="generateSelectedReport('analytics')">
        <div class="report-icon">📈</div>
        <div class="report-info">
          <h3>{{ getTranslation('dashboard.analyticsReport') }}</h3>
          <p>{{ getTranslation('dashboard.analyticsReportDesc') }}</p>
          <div class="report-meta">
            <span class="format">HTML</span>
            <span class="count">4 métricas</span>
          </div>
        </div>
        <div class="report-arrow">→</div>
      </div>
      
      <div class="report-card featured" (click)="generateSelectedReport('complete')">
        <div class="report-icon">📋</div>
        <div class="report-info">
          <h3>{{ getTranslation('dashboard.executiveReport') }}</h3>
          <p>{{ getTranslation('dashboard.executiveReportDesc') }}</p>
          <div class="report-meta">
            <span class="format premium">HTML Premium</span>
            <span class="count">{{ getTranslation('dashboard.allIncluded') }}</span>
          </div>
        </div>
        <div class="report-arrow">→</div>
        <div class="featured-badge">⭐ {{ getTranslation('dashboard.recommended') }}</div>
      </div>
    </div>
    
    <div class="report-footer">
      <div class="report-info-text">
        <span>⚡</span>
        <p>{{ getTranslation('dashboard.reportsGenerated') }}</p>
      </div>
      <div class="report-switch-link">
        <button class="switch-report-btn" (click)="switchToAdvancedReports()">
          <span class="switch-icon">🚀</span>
          <span class="switch-text">{{ getTranslation('dashboard.advancedReport') }}</span>
          <span class="switch-arrow">→</span>
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Project Modal -->
<div class="modal-overlay" *ngIf="showProjectModal" (click)="closeProjectModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h3>{{ isEditingProject ? getTranslation('dashboard.editProject') : getTranslation('dashboard.newProject') }}</h3>
      <button class="modal-close" (click)="closeProjectModal()" title="Fechar modal" aria-label="Fechar modal de projeto">×</button>
    </div>
    <div class="modal-body">
      <div class="form-group">
        <label for="project-name">Nome do Projeto</label>
        <input id="project-name" type="text" [(ngModel)]="currentProject.name" placeholder="Digite o nome do projeto" aria-label="Nome do projeto">
      </div>
      <div class="form-group">
        <label for="project-description">Descrição</label>
        <textarea id="project-description" [(ngModel)]="currentProject.description" placeholder="Descreva o projeto" aria-label="Descrição do projeto"></textarea>
      </div>
      <div class="form-row">
        <div class="form-group">
          <label for="project-status">Status</label>
          <select id="project-status" [(ngModel)]="currentProject.status" aria-label="Status do projeto">
            <option value="planning">Planejamento</option>
            <option value="in-progress">Em Andamento</option>
            <option value="review">Em Revisão</option>
            <option value="completed">Concluído</option>
          </select>
        </div>
        <div class="form-group">
          <label for="project-team-size">Tamanho da Equipe</label>
          <input id="project-team-size" type="number" [(ngModel)]="currentProject.teamSize" min="1" aria-label="Tamanho da equipe">
        </div>
      </div>
      <div class="form-group">
        <label for="project-deadline">Data de Entrega</label>
        <input id="project-deadline" type="date" [(ngModel)]="currentProject.deadline" aria-label="Data de entrega">
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn-secondary" (click)="closeProjectModal()">Cancelar</button>
      <button class="btn-primary" (click)="saveProject()">{{ isEditingProject ? 'Atualizar' : 'Criar' }}</button>
    </div>
  </div>
</div>

<!-- Task Modal -->
<div class="modal-overlay" *ngIf="showTaskModal" (click)="closeTaskModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h3>{{ isEditingTask ? getTranslation('dashboard.editTask') : getTranslation('dashboard.newTask') }}</h3>
      <button class="modal-close" (click)="closeTaskModal()" title="Fechar modal" aria-label="Fechar modal de tarefa">×</button>
    </div>
    <div class="modal-body">
      <div class="form-group">
        <label for="task-title">{{ getTranslation('dashboard.taskTitle') }}</label>
        <input id="task-title" type="text" [(ngModel)]="currentTask.title" placeholder="Digite o título da tarefa" aria-label="Título da tarefa">
      </div>
      <div class="form-group">
        <label for="task-description">{{ getTranslation('dashboard.description') }}</label>
        <textarea id="task-description" [(ngModel)]="currentTask.description" placeholder="Descreva a tarefa" aria-label="Descrição da tarefa"></textarea>
      </div>
      <div class="form-row">
        <div class="form-group">
          <label for="task-project">Projeto</label>
          <select id="task-project" [(ngModel)]="currentTask.projectId" aria-label="Projeto associado">
            <option value="">Nenhum projeto</option>
            <option *ngFor="let project of activeProjects" [value]="project.id">{{ project.name }}</option>
          </select>
        </div>
        <div class="form-group">
          <label for="task-priority">Prioridade</label>
          <select id="task-priority" [(ngModel)]="currentTask.priority" aria-label="Prioridade da tarefa">
            <option value="low">Baixa</option>
            <option value="medium">Média</option>
            <option value="high">Alta</option>
          </select>
        </div>
      </div>
      <div class="form-group">
        <label for="task-due-date">Data de Vencimento</label>
        <input id="task-due-date" type="date" [(ngModel)]="currentTask.dueDate" aria-label="Data de vencimento">
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn-secondary" (click)="closeTaskModal()">Cancelar</button>
      <button class="btn-primary" (click)="saveTask()">{{ isEditingTask ? 'Atualizar' : 'Criar' }}</button>
    </div>
  </div>
</div>

<!-- Client Management Modal -->
<div class="modal-overlay" *ngIf="showClientModal" (click)="closeClientModal()">
  <div class="client-modal" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h3>🏢 Gerenciar Clientes</h3>
      <button class="modal-close" (click)="closeClientModal()" title="Fechar modal">×</button>
    </div>
    
    <!-- Tabs Navigation -->
    <div class="tabs-nav">
      <button class="tab-btn" [class.active]="activeTab === 'overview'" (click)="activeTab = 'overview'">
        <span class="tab-icon">📊</span>
        <span class="tab-text">Visão Geral</span>
      </button>
      <button class="tab-btn" [class.active]="activeTab === 'clients'" (click)="activeTab = 'clients'">
        <span class="tab-icon">👥</span>
        <span class="tab-text">Clientes</span>
      </button>
      <button class="tab-btn" [class.active]="activeTab === 'form'" (click)="activeTab = 'form'">
        <span class="tab-icon">➕</span>
        <span class="tab-text">Novo Cliente</span>
      </button>
    </div>
    
    <div class="tab-content">
      <!-- Overview Tab -->
      <div class="tab-panel" *ngIf="activeTab === 'overview'">
        <div class="overview-header">
          <h3>📊 Resumo dos Clientes</h3>
          <p>Visão geral dos seus clientes e contratos</p>
        </div>
        
        <div class="stats-grid">
          <div class="stat-card total">
            <div class="stat-icon">👥</div>
            <div class="stat-info">
              <div class="stat-number">{{ activeClients.length }}</div>
              <div class="stat-label">Total de Clientes</div>
            </div>
          </div>
          <div class="stat-card revenue">
            <div class="stat-icon">💰</div>
            <div class="stat-info">
              <div class="stat-number">R$ {{ getTotalContractValue() | number:'1.0-0' }}</div>
              <div class="stat-label">Valor Total</div>
            </div>
          </div>
          <div class="stat-card active">
            <div class="stat-icon">✅</div>
            <div class="stat-info">
              <div class="stat-number">{{ getActiveClientsCount() }}</div>
              <div class="stat-label">Clientes Ativos</div>
            </div>
          </div>
          <div class="stat-card average">
            <div class="stat-icon">📈</div>
            <div class="stat-info">
              <div class="stat-number">R$ {{ getAverageContractValue() | number:'1.0-0' }}</div>
              <div class="stat-label">Valor Médio</div>
            </div>
          </div>
        </div>
        
        <div class="overview-insights">
          <div class="insight-card">
            <div class="insight-icon">📊</div>
            <div class="insight-content">
              <h4>Performance</h4>
              <p>{{ ((getActiveClientsCount() / activeClients.length) * 100) | number:'1.0-0' }}% dos clientes estão ativos</p>
            </div>
          </div>
          <div class="insight-card">
            <div class="insight-icon">💡</div>
            <div class="insight-content">
              <h4>Oportunidade</h4>
              <p>{{ activeClients.length - getActiveClientsCount() }} clientes podem ser reativados</p>
            </div>
          </div>
        </div>
        
        <div class="quick-actions">
          <button class="quick-btn primary" (click)="activeTab = 'form'">
            <span>➕</span> Novo Cliente
          </button>
          <button class="quick-btn secondary" (click)="activeTab = 'clients'">
            <span>👥</span> Ver Todos
          </button>
        </div>
      </div>
      
      <!-- Clients Tab -->
      <div class="tab-panel" *ngIf="activeTab === 'clients'">
        <div class="search-controls">
          <div class="search-box">
            <input type="text" [(ngModel)]="clientSearchTerm" placeholder="Buscar clientes...">
            <span class="search-icon">🔍</span>
          </div>
          <select [(ngModel)]="clientStatusFilter" title="Filtrar por status">
            <option value="all">Todos</option>
            <option value="active">Ativos</option>
            <option value="pending">Pendentes</option>
            <option value="inactive">Inativos</option>
          </select>
        </div>
        
        <div class="clients-list">
          <div class="client-item" *ngFor="let client of getFilteredClients()" [class.expired]="isContractExpired(client)">
            <div class="client-avatar" [style.background]="getClientAvatarColor(client.name)">
              {{ client.name.charAt(0).toUpperCase() }}
            </div>
            <div class="client-info">
              <h4>{{ client.name }}</h4>
              <p>{{ client.email }}</p>
              <div class="client-meta">
                <span class="status-badge" [ngClass]="client.status">{{ client.statusText }}</span>
                <span class="value">R$ {{ client.contractValue | number:'1.0-0' }}</span>
              </div>
            </div>
            <div class="client-actions">
              <button class="action-btn edit" (click)="editClient(client); activeTab = 'form'" title="Editar">
                ✏️
              </button>
              <button class="action-btn delete" (click)="deleteClient(client)" title="Excluir">
                🗑️
              </button>
            </div>
          </div>
        </div>
        
        <div class="empty-state" *ngIf="getFilteredClients().length === 0">
          <div class="empty-icon">👥</div>
          <p>Nenhum cliente encontrado</p>
          <button class="btn-primary" (click)="activeTab = 'form'">Adicionar Cliente</button>
        </div>
      </div>
      
      <!-- Form Tab -->
      <div class="tab-panel" *ngIf="activeTab === 'form'">
        <form class="client-form">
          <div class="form-section">
            <h4>{{ isEditingClient ? 'Editar Cliente' : 'Novo Cliente' }}</h4>
            
            <div class="form-group">
              <label>Nome Completo *</label>
              <input type="text" [(ngModel)]="currentClient.name" name="name" placeholder="Nome do cliente" required>
            </div>
            
            <div class="form-row">
              <div class="form-group">
                <label>Email *</label>
                <input type="email" [(ngModel)]="currentClient.email" name="email" placeholder="email@exemplo.com" required>
              </div>
              <div class="form-group">
                <label>Telefone</label>
                <input type="tel" [(ngModel)]="currentClient.phone" name="phone" placeholder="(11) 99999-9999">
              </div>
            </div>
            
            <div class="form-row">
              <div class="form-group">
                <label>Valor do Contrato *</label>
                <div class="input-prefix">
                  <input type="input" [(ngModel)]="currentClient.contractValue" name="contractValue" placeholder="0,00" required>
                </div>
              </div>
              <div class="form-group">
                <label>Status</label>
                <select title="status" [(ngModel)]="currentClient.status" name="status">
                  <option value="active">Ativo</option>
                  <option value="pending">Pendente</option>
                  <option value="inactive">Inativo</option>
                </select>
              </div>
            </div>
            
            <div class="form-row">
              <div class="form-group">
                <label>Início do Contrato</label>
                <input title="date" type="date" [(ngModel)]="currentClient.contractStart" name="contractStart">
              </div>
              <div class="form-group">
                <label>Fim do Contrato</label>
                <input title="contract" type="date" [(ngModel)]="currentClient.contractEnd" name="contractEnd">
              </div>
            </div>
            
            <div class="form-group">
              <label>Observações</label>
              <textarea [(ngModel)]="currentClient.notes" name="notes" placeholder="Observações sobre o cliente..." rows="3"></textarea>
            </div>
          </div>
          
          <div class="form-actions">
            <button type="button" class="btn-secondary" (click)="resetForm(); activeTab = 'clients'">Cancelar</button>
            <button type="button" class="btn-primary" (click)="saveClient()">{{ isEditingClient ? 'Atualizar' : 'Salvar' }}</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- Meeting Modal -->
<div class="modal-overlay" *ngIf="showMeetingModal" (click)="closeMeetingModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h3>{{ getTranslation('dashboard.scheduleMeeting') }}</h3>
      <button class="modal-close" (click)="closeMeetingModal()" title="Fechar modal" aria-label="Fechar modal de reunião">×</button>
    </div>
    <div class="modal-body">
      <div class="form-group">
        <label for="meeting-title">{{ getTranslation('dashboard.meetingTitle') }}</label>
        <input id="meeting-title" type="text" [(ngModel)]="currentMeeting.title" placeholder="Digite o título da reunião" aria-label="Título da reunião">
      </div>
      <div class="form-row">
        <div class="form-group">
          <label for="meeting-date">{{ getTranslation('dashboard.date') }}</label>
          <input id="meeting-date" type="date" [(ngModel)]="currentMeeting.date" aria-label="Data da reunião">
        </div>
        <div class="form-group">
          <label for="meeting-time">{{ getTranslation('dashboard.time') }}</label>
          <input id="meeting-time" type="time" [(ngModel)]="currentMeeting.time" aria-label="Horário da reunião">
        </div>
      </div>
      <div class="form-group">
        <label for="meeting-participants">{{ getTranslation('dashboard.participants') }}</label>
        <input id="meeting-participants" type="text" [(ngModel)]="currentMeeting.participants" [placeholder]="getTranslation('dashboard.separatedByComma')" aria-label="Participantes da reunião">
      </div>
      <div class="form-group">
        <label for="meeting-description">{{ getTranslation('dashboard.description') }}</label>
        <textarea id="meeting-description" [(ngModel)]="currentMeeting.description" placeholder="Descreva a reunião" aria-label="Descrição da reunião"></textarea>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn-secondary" (click)="closeMeetingModal()">Cancelar</button>
      <button class="btn-primary" (click)="saveMeeting()">Agendar</button>
    </div>
  </div>
</div>

<!-- Team Modal -->
<div class="modal-overlay" *ngIf="showTeamModal" (click)="closeTeamModal()">
  <div class="team-modal" (click)="$event.stopPropagation()">
    <div class="team-header">
      <div class="header-top">
        <button class="back-to-dashboard-btn primary" (click)="closeTeamModal()" title="Voltar ao Dashboard">
          <span class="back-icon">←</span>
          Voltar ao Dashboard
        </button>
      </div>
      <h2>👥 Performance da Equipe</h2>
      <p>Visão detalhada dos membros da equipe e suas métricas</p>
    </div>
    
    <div class="team-stats">
      <div class="stat-item">
        <div class="stat-number">{{ teamMembers.length }}</div>
        <div class="stat-label">Membros</div>
      </div>
      <div class="stat-item">
        <div class="stat-number">{{ getTotalActiveProjects() }}</div>
        <div class="stat-label">Projetos Ativos</div>
      </div>
      <div class="stat-item">
        <div class="stat-number">{{ getAverageEfficiency() }}%</div>
        <div class="stat-label">Eficiência Média</div>
      </div>
    </div>
    
    <div class="team-grid">
      <div class="team-member-card" *ngFor="let member of teamMembers">
        <div class="member-header">
          <div class="member-avatar">{{ member.name.charAt(0) }}</div>
          <div class="member-info">
            <h4>{{ member.name }}</h4>
            <div class="member-role">{{ member.role }}</div>
            <div class="member-status" [ngClass]="member.status">{{ member.statusText }}</div>
          </div>
        </div>
        <div class="member-metrics">
          <div class="metric">
            <span class="metric-label">Projetos Ativos</span>
            <span class="metric-value">{{ member.activeProjects }}</span>
          </div>
          <div class="metric">
            <span class="metric-label">Eficiência</span>
            <span class="metric-value">{{ member.efficiency }}%</span>
          </div>
          <div class="efficiency-bar">
            <div class="efficiency-fill" [style.width.%]="member.efficiency"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>